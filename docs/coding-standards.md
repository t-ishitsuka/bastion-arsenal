# コーディング規約

## 絶対に守るべきルール

### ドキュメントでの絵文字禁止

**ドキュメントファイル（.md）には絵文字を一切使用しない**

- 対象: CLAUDE.md, README.md, docs/ 配下の全ファイル
- ターミナル出力（CLI実行時の表示）のみ絵文字使用可
- 理由: ドキュメントでの絵文字は好まれない
- 違反例: ✅, ❌, 🔧, 📦, ⚠️, ✓, ✗ など全ての絵文字・Unicode記号
- 正しい表記: [実装済み], (未実装), ※注意, など通常の文字のみ使用

このルールは他のすべての規約より優先度が高い。

### 実装とドキュメントの同期

**コード変更時は必ず関連ドキュメントを同時更新する**

- 新機能実装時: README.md, CLAUDE.md の実装状況を更新
- CLI コマンド追加時: コマンド一覧表、使用例を更新
- 仕様変更時: 該当する docs/ 配下のファイルを更新
- ドキュメント更新を後回しにしない（実装と同時に行う）

対象ドキュメント:
- CLAUDE.md - プロジェクト全体の実装状況
- README.md - ユーザー向け使用方法、実装済みコマンド
- docs/ 配下の各ファイル - 技術仕様、設計方針

## 基本方針

- Go 標準のフォーマット (`gofmt`)
- エラーは `fmt.Errorf("context: %w", err)` でラップ
- パッケージ間の依存は一方向: `cli → version → plugin → config`
- **コードを変更したら必ず linter を実行する**: `golangci-lint run ./...`
- エラーハンドリングは省略しない（特に `Close()`, `Remove()` などのクリーンアップ処理）

## テスト

- **新しいコードを書く際は必ずテストを書く**
- テストファイルは同じパッケージ内に `*_test.go` として配置
- テーブル駆動テストを推奨
- 外部依存（ファイルシステム、ネットワーク）はモックまたは一時ディレクトリを使用
- テストカバレッジは `go test -cover` で確認
- テスト関数名は `Test<対象関数名>` または `Test<対象機能>` の形式

## 出力とログ

- ユーザー向けターミナル出力には絵文字プレフィックスを使用可 (例: install 時 "📦 ダウンロード中..." など)
- 内部ログは `fmt.Printf` で統一（将来 log パッケージに切り替え可能）
- **重要**: ドキュメントファイル（.md）には絵文字厳禁（詳細は上記「絶対に守るべきルール」参照）

## コメント

- 関数、型、メソッドには日本語のコメントを付ける
- 複雑なロジックには説明コメントを追加
- ドキュメントコメントでは関数名を繰り返さない（関数名は関数定義から明らか）
  - 良い例: `// 正しくパスを返すかテストする`
  - 悪い例: `// TestGetPaths は GetPaths 関数が正しくパスを返すかテストする`

## 命名規則

- 変数名、関数名、構造体名は英語
- パッケージ名は小文字の英単語（複数形は避ける）
- 非公開の変数/関数は小文字始まり
- 公開の変数/関数は大文字始まり
